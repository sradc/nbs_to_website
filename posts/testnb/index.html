
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test page</title>
    <link rel="stylesheet" href="../../stylesheet.css">
    <script src="../../script.js"></script>
    
<script type="text/javascript" async
  src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-MML-AM_CHTML">
</script>

<!-- MathJax configuration -->
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ],
        displayMath: [ ['$$','$$'], ],
        processEscapes: true,
        processEnvironments: true
    },
    // Center justify equations in code and markdown cells. Elsewhere
    // we use CSS to left justify single line equations in code cells.
    displayAlign: 'center',
    "HTML-CSS": {
        styles: {'.MathJax_Display': {"margin": 0}},
        linebreaks: { automatic: true }
    }
});
</script>

  </head>
  <body>
    <div class="notebook"><div class="code"><div class="highlight"><pre><span></span><span class="o">%</span><span class="n">matplotlib</span> <span class="n">ipympl</span>
</pre></div>
</div><br><div class="markdown"><h1>Test notebook</h1>
<p>$x = y * 2$</p>
<pre><code class="language-bash">mkdir dirp
</code></pre>
<p>Foo bar.</p>
<p>This is de markdown.</p>
</div><br><div class="code"><div class="highlight"><pre><span></span><span class="c1"># {{hide}}</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
</pre></div>
</div><br><div class="code"><div class="highlight"><pre><span></span><span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;de foo&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">dpi</span><span class="o">=</span><span class="mi">120</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span><span class="s2">&quot;off&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;de bar&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="o">-</span><span class="n">x</span><span class="p">)</span>
</pre></div>
</div><div class="outputs"><div class="outtext"><div class="highlight"><pre><span></span>de foo
</pre></div>
</div><img src="./99080.png" class="out_img"/><div class="outtext"><div class="highlight"><pre><span></span>de bar
</pre></div>
</div><img src="./96532.png" class="out_img"/></div><br><div class="code"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">100</span><span class="p">)))</span>
</pre></div>
</div><div class="outputs"><div class="outtext"><div class="highlight"><pre><span></span>[0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95, 96, 97, 98, 99]
</pre></div>
</div></div><br><div class="markdown"><p>{{hide}}</p>
<p>I'd like to be able to hide cells.</p>
</div><br><div class="markdown"><p>{{collapse}}</p>
<p>I'd like to be able to have collapsible cells.</p>
</div><br><div class="code"><div class="highlight"><pre><span></span><span class="c1"># {{hide}}</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;I&#39;d like to be able to hide code cells, but not the output&quot;</span><span class="p">)</span>
</pre></div>
</div><div class="outputs"><div class="outtext"><div class="highlight"><pre><span></span>I&#39;d like to be able to hide code cells, but not the output
</pre></div>
</div></div><br><div class="code"><div class="highlight"><pre><span></span><span class="c1"># {{collapse}}</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;I&#39;d like to be able to have collapsible code cells, with the output showing&quot;</span><span class="p">)</span>
</pre></div>
</div><div class="outputs"><div class="outtext"><div class="highlight"><pre><span></span>I&#39;d like to be able to have collapsible code cells, with the output showing
</pre></div>
</div></div><br><div class="code"><div class="highlight"><pre><span></span><span class="c1"># {{collapse_all}}</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;I&#39;d like to be able to collapse code and output.&quot;</span><span class="p">)</span>
</pre></div>
</div><div class="outputs"><div class="outtext"><div class="highlight"><pre><span></span>I&#39;d like to be able to collapse code and output.
</pre></div>
</div></div><br><div class="code"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">defaultdict</span>


<span class="k">class</span> <span class="nc">Variable</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">local_gradients</span><span class="o">=</span><span class="p">()):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">value</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">local_gradients</span> <span class="o">=</span> <span class="n">local_gradients</span>


<span class="k">def</span> <span class="nf">add</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
    <span class="s2">&quot;Create the variable that results from adding two variables.&quot;</span>
    <span class="n">value</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">value</span> <span class="o">+</span> <span class="n">b</span><span class="o">.</span><span class="n">value</span>
    <span class="n">local_gradients</span> <span class="o">=</span> <span class="p">(</span>
        <span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>  <span class="c1"># the local derivative with respect to a is 1</span>
        <span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>  <span class="c1"># the local derivative with respect to b is 1</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">Variable</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">local_gradients</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">mul</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
    <span class="s2">&quot;Create the variable that results from multiplying two variables.&quot;</span>
    <span class="n">value</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">value</span> <span class="o">*</span> <span class="n">b</span><span class="o">.</span><span class="n">value</span>
    <span class="n">local_gradients</span> <span class="o">=</span> <span class="p">(</span>
        <span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="o">.</span><span class="n">value</span><span class="p">),</span>  <span class="c1"># the local derivative with respect to a is b.value</span>
        <span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="o">.</span><span class="n">value</span><span class="p">),</span>  <span class="c1"># the local derivative with respect to b is a.value</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">Variable</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">local_gradients</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">get_gradients</span><span class="p">(</span><span class="n">variable</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Compute the first derivatives of `variable`</span>
<span class="sd">    with respect to child variables.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">gradients</span> <span class="o">=</span> <span class="n">defaultdict</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="mi">0</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">compute_gradients</span><span class="p">(</span><span class="n">variable</span><span class="p">,</span> <span class="n">path_value</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">child_variable</span><span class="p">,</span> <span class="n">local_gradient</span> <span class="ow">in</span> <span class="n">variable</span><span class="o">.</span><span class="n">local_gradients</span><span class="p">:</span>
            <span class="c1"># &quot;Multiply the edges of a path&quot;:</span>
            <span class="n">value_of_path_to_child</span> <span class="o">=</span> <span class="n">path_value</span> <span class="o">*</span> <span class="n">local_gradient</span>
            <span class="c1"># &quot;Add together the different paths&quot;:</span>
            <span class="n">gradients</span><span class="p">[</span><span class="n">child_variable</span><span class="p">]</span> <span class="o">+=</span> <span class="n">value_of_path_to_child</span>
            <span class="c1"># recurse through graph:</span>
            <span class="n">compute_gradients</span><span class="p">(</span><span class="n">child_variable</span><span class="p">,</span> <span class="n">value_of_path_to_child</span><span class="p">)</span>

    <span class="n">compute_gradients</span><span class="p">(</span><span class="n">variable</span><span class="p">,</span> <span class="n">path_value</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
    <span class="c1"># (path_value=1 is from `variable` differentiated w.r.t. itself)</span>
    <span class="k">return</span> <span class="n">gradients</span>
</pre></div>
</div><br><div class="code"><div class="highlight"><pre><span></span><span class="n">count</span> <span class="o">=</span> <span class="mi">0</span>
<span class="k">try</span><span class="p">:</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">):</span>
                <span class="k">for</span> <span class="n">l</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">):</span>
                    <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">):</span>
                        <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">):</span>
                            <span class="k">for</span> <span class="n">o</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">):</span>
                                <span class="k">if</span> <span class="n">count</span> <span class="o">&gt;</span> <span class="mi">5</span><span class="p">:</span>
                                    <span class="k">assert</span> <span class="kc">False</span><span class="p">,</span> <span class="s2">&quot;finished&quot;</span>
                                <span class="n">count</span> <span class="o">+=</span> <span class="mi">1</span>
                                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;u wot m8&quot;</span><span class="p">)</span>
<span class="k">except</span> <span class="ne">AssertionError</span><span class="p">:</span>
    <span class="k">pass</span>
</pre></div>
</div><div class="outputs"><div class="outtext"><div class="highlight"><pre><span></span>u wot m8
u wot m8
u wot m8
u wot m8
u wot m8
u wot m8
</pre></div>
</div></div><br><div class="code"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">from</span> <span class="nn">matplotlib.animation</span> <span class="kn">import</span> <span class="n">FuncAnimation</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
<span class="n">xdata</span><span class="p">,</span> <span class="n">ydata</span> <span class="o">=</span> <span class="p">[],</span> <span class="p">[]</span>
<span class="p">(</span><span class="n">ln</span><span class="p">,)</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">([],</span> <span class="p">[],</span> <span class="s2">&quot;ro&quot;</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">init</span><span class="p">():</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">ln</span><span class="p">,)</span>


<span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="n">frame</span><span class="p">):</span>
    <span class="n">xdata</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">frame</span><span class="p">)</span>
    <span class="n">ydata</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">frame</span><span class="p">))</span>
    <span class="n">ln</span><span class="o">.</span><span class="n">set_data</span><span class="p">(</span><span class="n">xdata</span><span class="p">,</span> <span class="n">ydata</span><span class="p">)</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">ln</span><span class="p">,)</span>


<span class="n">ani</span> <span class="o">=</span> <span class="n">FuncAnimation</span><span class="p">(</span>
    <span class="n">fig</span><span class="p">,</span> <span class="n">update</span><span class="p">,</span> <span class="n">frames</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="p">,</span> <span class="mi">128</span><span class="p">),</span> <span class="n">init_func</span><span class="o">=</span><span class="n">init</span><span class="p">,</span> <span class="n">blit</span><span class="o">=</span><span class="kc">True</span>
<span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div><div class="outputs"><img src="./4fc7e.png" class="out_img"/></div><br></div>
  </body>
</html>
    